I was not notified of an IP address change, and I do not know if I will be notified of future changes.
A quick look at the current IP addresses for smtp.mailgun.org reveals that they're all on Amazon AWS. You ought to expect these to change frequently, and so hard coding them in the firewall becomes tricky at best. You may well lose outgoing mail even with a dynamic script, as the IP address may change and you try to send mail before the next run of the script. This is called a race condition. There's not much you can do about it except redesign, and that's what I'll recommend...
I run a server that sends emails through smtp.mailgun.org. I locked down the server to only allow outgoing SMTP on port 587 to smtp.mailgun.org.
The IP address for this domain recently changed and as a result my system stopped sending emails. As part of trying to figure out what had stopped working, I became aware of the downsides of using domain names in iptables rules as well as the fact that iptables does a lookup when you run the rule and saves the IP address at the time the rule is created, thus IP address changes in domains are not reflected in iptables.
As for egress firewalling, I really don't have much concern about outgoing traffic to port 587. All such traffic has to authenticate to the remote mail server anyway, so it's not a significant concern for me. For mail I worry about outgoing traffic to port 25; if you're using a service like mailgun, there should be no such traffic, and if there is, it's almost certainly because you've been compromised.
What's the best way to manage this situation? Should I write a script that regularly checks the IP address for smtp.mailgun.org and updates iptables when it changes? (I am aware of the security risks in doing this, but perhaps they are worth taking).