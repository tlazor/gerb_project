In the end I found that IPv6 was causing the problems with the name resolution: on each DNS query the IPv6 DNS was queried rather than the IPv4 company DNS servers. After deactivating IPv6, you have to ipconfig /flushdns otherwise previously queried addresses may still not be resolved.
It would seem that yet another system administrator has fallen foul of the My ISP provides and documents it, so I must use it. fallacy.  â˜º
Every now and then, the user can't access the website at windows.cs. If I ping it, it says it can't resolve the host name. I flush the DNS cache, and then when I display the dns cache it has the following:
Yet if I use nslookup, which by default queries the primary DNS server (our internal one) and I query windows.cs, it returns the correct IP address.
The results of nslookup differ from that of ping because of nslookup idiosyncracies and bugs.  They are not really relevant to your main problem, however, which is that you've violated the rule that your fallback proxy DNS servers must provide the same view of the DNS namespace as your principal one.  Your ISP's proxy DNS server doesn't provide the same view of the DNS namespace as your own proxy DNS servers on your LAN.
TL;DR version: IPv6 caused the DNS query problem in my case, deactivating it solved the DNS query problem.
the reason why is the agein on DNS itself. The DNS did not delete the record after the lease has been expired and didn't get renewed  which couldn't resolve the name because it'sold for it.
I was able to resolve the issue simple by deleting the DNS record and run the flushdns and registerdns commands and that fixes it.
I have a user on Windows 7 that is trying to access a local server with a DNS name of windows.cs. We have two internal DNS servers. The DHCP server assigns users the two internal DNS servers as primary and secondary and then our ISPs DNS as a tertiary DNS server.
So why can't Windows resolve the hostname using ping, but it can when using the nslookup tool? And how do I fix this?
I had the same problem on my development machine. Whenever I logged in into our company network, I was not able to resolve the internal host names, all external host names/URIs could be resolved. I did check the DNS servers that had been assigned on the VPN connection and they showed the company DNS servers were configured as primary and secondary. I could also use nslookup but had to manually change the server via server X.X.X.X to get DNS resolution.