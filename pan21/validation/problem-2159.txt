I would look at using something like expect instead of just trying to redirect from a file.  expect will handle password prompts and the like, and respond with the information you want, based on the output.
Consider looking at RANCID. It's primarily intended as a configuration backup tool for Cisco and other networking devices, but one of its components, clogin, is essentially an Expect script that does exactly what you're asking. Using the command and router file listings in your example, you could execute the commands on all routers like this:
It can read a configuration file in which you can store login names and passwords, so you can avoid passing them on the command line. It has multiple login options, so it can deal with cases where you aren't using aaa new-model and just have passwords on the VTYs, and cases with older gear that asks for the username in response to the enable command.
The only real downside is that it's not especially quiet. For instance, if you want the output of show version, you'll get that, but you'll also get all the login banners, login/passwords prompts, and command prompts in your output.
Under rhel6 the package would be called expect.  There is also a python module that does sort of the same thing called pexpect, available from the rhel6 updates repo.  A perl module that does the same is called perl-Expect.
I have been using this perl script for about a year now. it's an evolution of several snippets of perl scripts i have found on various forums plus a bit of trial and error but it works well. 
It will skip over devices that do not respond or fail authentication and carry on with the next device in the list, and provides a log file for each device named with it's ip address.
This pages http://nixcraft.com/showthread.php/15060-script-to-auto-login-to-cisco-router-(-telnet-and-SSH) gives some examples of what you are trying to do.
You will need to install the module Time::HiRes for the usleep, but i found that it helps with execution of commands on remote switches and routers where the response time to a command is a little longer.