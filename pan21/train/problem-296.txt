As part of system hardening, I'm trying to configure my firewall during a CentOS 6.6 kickstart with the following line. It does work under one circumstance, and otherwise it doesn't.
Versions of RHEL/CentOS prior to 6.6 automatically included this package, see https://bugs.centos.org/view.php?id=7956 and https://bugzilla.redhat.com/show_bug.cgi?id=1161682 for discussion of the issue.
You need to add the system-config-firewall-base package, which provides the lokkit command used to configure the firewall during kickstart.
I'd like to avoid that, so that the firewall configuration is in place on first boot and generated by the default mechanism, not some addon.
This tells it to enable the firewall, and open up a certain set of services. The line break are for readability, and not part of the config.
I made a lot of reinstalls to track this down, and searched via google to find that there's quite a few people combining --nobase and firewall --enabled --port settings.
Yeah basically, I'd just like to fullfill that missing dependency. If there's no way to find it, I'll instead put the iptables config under control of something outside of the OS install.
As soon as I remove --nobase, iptables is set up correctly, with only the defined set of open ports.