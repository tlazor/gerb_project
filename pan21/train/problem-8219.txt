Additionally, while ICMP does require IP to function, it is implemented as part of the IP protocol and only exists to communicate information about the network layer. For example, ping (Echo requests and Echo replies) only provide information about L3 reachability. They don't provide any information about any higher layer protocols.
Despite these debates, ICMP is generally considered a L3 or network protocol because it isn't a transport layer protocol and L3.5 isn't an actual layer. Specifically, ICMP only provides structured data in the IP packet; it doesn't add anything that is considered another layer of headers like a L4 protocl like TCP or UDP do.
As others have noted, the models are just that, models. So not everything in the real world always fits neatly into the models. ICMP is one such area where people will sometimes debate on which layer (L3, L3.5, or L4) it exists.
The same applies to L2, there are many examples (STP, CDP, and so on) of L2 frames containing data that has nothing at all to do with a L3 or higher protocol (i.e. no IP headers, etc). Again, just because the frame has a payload doesn't mean the payload is sourced from a higher layer protocol.
ICMP works only on Network Layer. You can test in Cisco Packet Tracer in simulation. Run ping from PC to Destination. In simulation click on any packet. Then it displays Seven Layers(OSI). You will figured out. (I cleared my doubt in this way)   
Whether the payload of an IP packet is raw data or a higher layer protocol is irrelevant to IP (L3). Or another way to say that would be just because an IP packet has a payload doesn't mean the payload is sourced from a higher layer protocol.