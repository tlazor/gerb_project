So where to add the -i command line option, if not to $PGOPTS? Add it directly to the 'postgres' command line, of course. The full command line is specified in ExecStart= for systemd's postgresql.service; you can see that it still retains some substitutions, but you can just as well add custom options directly:
Said magic used to be done within the old startup script (/etc/rc.d/init.d/postgresql which was used by RedHat/CentOS before systemd) â€“ it isn't actually used as an "environment" variable, but as a direct substitution in the 'postgres' command line:
But the problem is that the PostgreSQL daemon doesn't use and has never used this environment variable in the first place. There is nothing in the actual software that would make the contents of $PGOPTS be magically appended to the daemon's command line.
Note: do not edit systemd units in /usr/lib; instead, copy the unit file to /etc/systemd/system and edit your copy, so that your changes will not be lost during package upgrades.
You're on the right track with systemd Environment= settings. (On the other hand, service startup process doesn't involve anything like user shells and interactive logins, so "profile" files are absolutely irrelevant.)