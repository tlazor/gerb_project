To restart the embedded controller, disconnect power supply, remove battery an try to power on the laptop. This obviously will not work, but helps to discharge capaciators powering the controller. Then reinsert battery and connect power supply again and see if it begins to charge. If not, the controller might have been running without interruption despite of the power-on attempt. In this case repeat these steps but wait some time (maybe one day) before reinserting/connecting.
While it looks like a hardware fault, it could also be the embedded controller/charge controller being in a undefined state. While this would probably also be just a coincidence, there might be malware interfering with the embedded controller. Your removal steps (which are unknown to us) might also have had an impact.
If the battery does not charge when the laptop is powered off, this has to be a hardware problem.  Either the battery is defective, the power supply you're using isn't providing enough power for the system to charge the battery, or the charging mechanisms inside the laptop are damaged in some manner.  The virus is purely coincidence - software problems cannot affect what happens when that software isn't running.