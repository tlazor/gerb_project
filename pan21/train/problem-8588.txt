I recently upgraded by Windows XP desktop to Windows 7 using the Home Premium Upgrade installation DVD. My original plan was to reformat the boot disk during installation, however, during the installation process that wasn't an option (I'm assuming this is because the old installation of Windows is needed during the installation process). The upgrade went fine.
Assuming there is still something wrong with the hard drive, I tried using Spin Rite to examine and repair the hard drive. However, on the first sector it examines it goes right into the DynaStat Data Recovery mode and never makes any further progress.
At this point, Windows boots fine. So the question is - should I bother reinstalling the corrupted programs, or should I write off this hard drive before I invest any more time reinstalling programs and restoring the data I saved before the upgrade? If I decide to go with a new hard drive, do I have to do a (minimal) XP installation before I can use the Windows 7 upgrade media and license key? 
After a few days of burn-in time I started deleted old unneeded files off the hard drive (something I was hoping to avoid by doing the reformat mentioned above). After this clean-up process, the system started running CHKDSK at each reboot of the system. After several iterations of running CHKDSK and rebooting, Windows started fine. However, some programs such as Firefox and MS Security Essentials stopped working. Security Essentials puts up a dialog box at startup suggesting that a reinstallation is needed; Firefox just crashes.