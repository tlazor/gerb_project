The configuration looks fine to me. In fact I just tested it in CentOS 6.3 and vsftpd: version 2.2.2, it worked without a problem. The user was jailed to their home directory. I had an issue with SELINUX and resolved it by setting setsebool ftp_home_dir on. Your shell script though caused a problem. In /etc/passwd, it set the home directory of the user to /home/./username instead of /home/username.
It is an old thread I know. Had the same problem using debian wheezy on a Raspberry Pi and found out that everytime during login automatically the sftp-server became active (ps -ef).  Disabled the server in sshd_config by changing the command into: Subsystem sftp /bin/false and got correct logins via the vsftp server using TLS. Chroot jail worked correct now.
My suggestion is to first try adding a user with a one-liner useradd -d /home/userftp -s /bin/false userftp, set a password and add the user to /etc/vsftpd.userlist. 
I had the same problem. No chroot, you could see all the files. When I allow chroot I can't log in my ftp server. 
I have a VSFTPD server running on Arch.  It works fine EXCEPT that users can navigate up the directory tree and view/download files in other user's home directories.  I figure that the answer lies in chroot() but every iteration of the configuration I've tried doesn't work (and yes, I've been restarting the server each time).  I'm not sure if the problem lies within the VSFTPD conf or the shell script I use to create new users.  I would really appreciate any help with this.