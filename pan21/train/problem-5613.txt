Please look at my code below. The code is running fine till I set 8 rows but when I try to set a 9th row in my database. The size increases from 8 to 16 but and causes a "segmentation fault". I am definitely doing something absurd in Database_Expand but I am don't know what. You can also try running the entire code in your C compiler. I am running it on my Mac Terminal by using Make.
Also after running the code through valgrind, showed me some memory leaks loss of some 16k bytes in Expand_Size. How do I correctly free the old memory space while reallocating?
Particularly in the function Database_Set and Database_ExpandSize. Inside Database_Set, I keep track of rows count to see if it exceeds maxrows and call Database_Expand to reallocate a new memory space of bigger size. Before this I shift everything from old address to a temporary address using memcpy.
If some of you C geniuses could kindly look into my code and point out what I am doing wrong, it would be greatly appreciated!
I am on exercise 17. Basically creating your own simple database using Malloc. I modified the exercise to come up with my own arbitrary size database. So far I have been on the right track. But I have had to deal with this segmentation fault nightmare and I don't know where and why its happening in my code.