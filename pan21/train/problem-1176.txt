i am making a simple multiplayer puzzle game which basically presents a group of connected users some simple questions and whoever answers first wins the  game. but i am having some issue in designing this game. assuming there are two players A and B connected & player A submits answers before player B but player A has some network lag, the server thinks that player B submitted the result first so player B wins.W chich is not correct.
i thought of calculating latencies for each player and store it on the server in something like in-memory database redis.
so when any player submits their answer i can just minus the latency with the time when the game started. that way i can know which player actually won.
i was thinking to use fping program to get latencies every 2 seconds and store it. but the problem is when there are 1000 players playing simultaneously calculating ping times would take more time than 2 seconds( loop for every connected player then find their ping times & store them in db) so the next run to calculate ping time will be delayed.